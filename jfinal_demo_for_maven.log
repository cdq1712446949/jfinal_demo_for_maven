
2019-04-17 11:42:29
[ERROR]-[Thread: qtp352359770-22]-[com.jfinal.core.ActionHandler.handle()]: /cdqblog/photo/addPhoto?image=%7B+++%22code%22%3A+%22success%22%2C+++%22data%22%3A+%7B+++++%22width%22%3A+1100%2C+++++%22height%22%3A+477%2C+++++%22filename%22%3A+%221.png%22%2C+++++%22storename%22%3A+%225cb69fdb72bf4.png%22%2C+++++%22size%22%3A+959512%2C+++++%22path%22%3A+%22%2F2019%2F04%2F17%2F5cb69fdb72bf4.png%22%2C+++++%22hash%22%3A+%22Edu36kXm5fT9pQ7%22%2C+++++%22timestamp%22%3A+1555472347%2C+++++%22ip%22%3A+%22122.5.7.138%22%2C+++++%22url%22%3A+%22https%3A%2F%2Fi.loli.net%2F2019%2F04%2F17%2F5cb69fdb72bf4.png%22%2C+++++%22delete%22%3A+%22https%3A%2F%2Fsm.ms%2Fdelete%2FEdu36kXm5fT9pQ7%22+++%7D+%7D
com.jfinal.plugin.activerecord.ActiveRecordException: com.mysql.jdbc.exceptions.jdbc4.MySQLIntegrityConstraintViolationException: Cannot add or update a child row: a foreign key constraint fails (`blog`.`photo`, CONSTRAINT `photo_ibfk_1` FOREIGN KEY (`height`) REFERENCES `article` (`id`))
	at com.jfinal.plugin.activerecord.Model.save(Model.java:533)
	at com.cdqblog.dao.PhotoDAO.addPhoto(PhotoDAO.java:10)
	at com.cdqblog.service.impl.PhotoServiceImpl.addPhoto(PhotoServiceImpl.java:17)
	at com.cdqblog.service.impl.PhotoServiceImpl$$EnhancerByCGLIB$$bfb53e2d.CGLIB$addPhoto$0(<generated>)
	at com.cdqblog.service.impl.PhotoServiceImpl$$EnhancerByCGLIB$$bfb53e2d$$FastClassByCGLIB$$b584fbf2.invoke(<generated>)
	at net.sf.cglib.proxy.MethodProxy.invokeSuper(MethodProxy.java:228)
	at com.jfinal.aop.Invocation.invoke(Invocation.java:84)
	at com.jfinal.aop.Callback.intercept(Callback.java:96)
	at com.cdqblog.service.impl.PhotoServiceImpl$$EnhancerByCGLIB$$bfb53e2d.addPhoto(<generated>)
	at com.cdqblog.controller.PhotoController.addPhoto(PhotoController.java:26)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:564)
	at com.jfinal.aop.Invocation.invoke(Invocation.java:75)
	at com.cdqblog.interceptor.CheckLogin_UserController_Interceptor.intercept(CheckLogin_UserController_Interceptor.java:23)
	at com.jfinal.aop.Invocation.invoke(Invocation.java:69)
	at com.cdqblog.interceptor.HrefInterceptor.intercept(HrefInterceptor.java:13)
	at com.jfinal.aop.Invocation.invoke(Invocation.java:69)
	at com.cdqblog.interceptor.UrlInterceptor.intercept(UrlInterceptor.java:13)
	at com.jfinal.aop.Invocation.invoke(Invocation.java:69)
	at com.cdqblog.interceptor.UserNameInterceptor.intercept(UserNameInterceptor.java:18)
	at com.jfinal.aop.Invocation.invoke(Invocation.java:69)
	at com.cdqblog.interceptor.IpInterceptor.intercept(IpInterceptor.java:28)
	at com.jfinal.aop.Invocation.invoke(Invocation.java:69)
	at com.jfinal.ext.interceptor.SessionInViewInterceptor.intercept(SessionInViewInterceptor.java:44)
	at com.jfinal.aop.Invocation.invoke(Invocation.java:69)
	at com.jfinal.core.ActionHandler.handle(ActionHandler.java:81)
	at com.jfinal.core.JFinalFilter.doFilter(JFinalFilter.java:86)
	at org.eclipse.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1634)
	at org.eclipse.jetty.servlet.ServletHandler.doHandle(ServletHandler.java:533)
	at org.eclipse.jetty.server.handler.ScopedHandler.handle(ScopedHandler.java:146)
	at org.eclipse.jetty.security.SecurityHandler.handle(SecurityHandler.java:548)
	at org.eclipse.jetty.server.handler.HandlerWrapper.handle(HandlerWrapper.java:132)
	at org.eclipse.jetty.server.handler.ScopedHandler.nextHandle(ScopedHandler.java:257)
	at org.eclipse.jetty.server.session.SessionHandler.doHandle(SessionHandler.java:1595)
	at org.eclipse.jetty.server.handler.ScopedHandler.nextHandle(ScopedHandler.java:255)
	at org.eclipse.jetty.server.handler.ContextHandler.doHandle(ContextHandler.java:1340)
	at org.eclipse.jetty.server.handler.ScopedHandler.nextScope(ScopedHandler.java:203)
	at org.eclipse.jetty.servlet.ServletHandler.doScope(ServletHandler.java:473)
	at org.eclipse.jetty.server.session.SessionHandler.doScope(SessionHandler.java:1564)
	at org.eclipse.jetty.server.handler.ScopedHandler.nextScope(ScopedHandler.java:201)
	at org.eclipse.jetty.server.handler.ContextHandler.doScope(ContextHandler.java:1242)
	at org.eclipse.jetty.server.handler.ScopedHandler.handle(ScopedHandler.java:144)
	at org.eclipse.jetty.server.handler.HandlerWrapper.handle(HandlerWrapper.java:132)
	at org.eclipse.jetty.server.Server.handle(Server.java:503)
	at org.eclipse.jetty.server.HttpChannel.handle(HttpChannel.java:364)
	at org.eclipse.jetty.server.HttpConnection.onFillable(HttpConnection.java:260)
	at org.eclipse.jetty.io.AbstractConnection$ReadCallback.succeeded(AbstractConnection.java:305)
	at org.eclipse.jetty.io.FillInterest.fillable(FillInterest.java:103)
	at org.eclipse.jetty.io.ChannelEndPoint$2.run(ChannelEndPoint.java:118)
	at org.eclipse.jetty.util.thread.strategy.EatWhatYouKill.runTask(EatWhatYouKill.java:333)
	at org.eclipse.jetty.util.thread.strategy.EatWhatYouKill.doProduce(EatWhatYouKill.java:310)
	at org.eclipse.jetty.util.thread.strategy.EatWhatYouKill.tryProduce(EatWhatYouKill.java:168)
	at org.eclipse.jetty.util.thread.strategy.EatWhatYouKill.run(EatWhatYouKill.java:126)
	at org.eclipse.jetty.util.thread.ReservedThreadExecutor$ReservedThread.run(ReservedThreadExecutor.java:366)
	at org.eclipse.jetty.util.thread.QueuedThreadPool.runJob(QueuedThreadPool.java:765)
	at org.eclipse.jetty.util.thread.QueuedThreadPool$2.run(QueuedThreadPool.java:683)
	at java.base/java.lang.Thread.run(Thread.java:844)
Caused by: com.mysql.jdbc.exceptions.jdbc4.MySQLIntegrityConstraintViolationException: Cannot add or update a child row: a foreign key constraint fails (`blog`.`photo`, CONSTRAINT `photo_ibfk_1` FOREIGN KEY (`height`) REFERENCES `article` (`id`))
	at java.base/jdk.internal.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)
	at java.base/jdk.internal.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:62)
	at java.base/jdk.internal.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:45)
	at java.base/java.lang.reflect.Constructor.newInstance(Constructor.java:488)
	at com.mysql.jdbc.Util.handleNewInstance(Util.java:425)
	at com.mysql.jdbc.Util.getInstance(Util.java:408)
	at com.mysql.jdbc.SQLError.createSQLException(SQLError.java:935)
	at com.mysql.jdbc.MysqlIO.checkErrorPacket(MysqlIO.java:3973)
	at com.mysql.jdbc.MysqlIO.checkErrorPacket(MysqlIO.java:3909)
	at com.mysql.jdbc.MysqlIO.sendCommand(MysqlIO.java:2527)
	at com.mysql.jdbc.MysqlIO.sqlQueryDirect(MysqlIO.java:2680)
	at com.mysql.jdbc.ConnectionImpl.execSQL(ConnectionImpl.java:2487)
	at com.mysql.jdbc.PreparedStatement.executeInternal(PreparedStatement.java:1858)
	at com.mysql.jdbc.PreparedStatement.executeUpdateInternal(PreparedStatement.java:2079)
	at com.mysql.jdbc.PreparedStatement.executeUpdateInternal(PreparedStatement.java:2013)
	at com.mysql.jdbc.PreparedStatement.executeLargeUpdate(PreparedStatement.java:5104)
	at com.mysql.jdbc.PreparedStatement.executeUpdate(PreparedStatement.java:1998)
	at com.alibaba.druid.pool.DruidPooledPreparedStatement.executeUpdate(DruidPooledPreparedStatement.java:253)
	at com.jfinal.plugin.activerecord.Model.save(Model.java:528)
	... 58 more
